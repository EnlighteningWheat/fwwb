<!-- 注册界面 -->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>智能问答系统（超星）</title>
    <link href="./css/common.css" rel="stylesheet" />
    <link href="./css/login.css" rel="stylesheet" />

</head>

<body>
    <!-- 导航 -->
    <nav>
        <!-- LOGO：单击跳转到相关展示界面 -->
        <a class="logo" href="https://z.chaoxing.com/yanshi/first" target="_blank">
            <img src="./imgs/logo.png"/>
        </a>
        <a href="./index.html">首页</a>
        <!-- #gallary 页面内锚点（后续会用到） -->
        <a href="./index.html#answer">智能小助手</a>
        <a href="./index.html#gallary">推荐</a>
        <a href="./index.html#news">热点时事</a>
        <a href="./login.html">登录</a>
        <a class="search" href="https://www.google.com/" target="_blank">
            <img src="./imgs/search.png"/>
        </a>
    </nav>
    <!-- TODO:header -->
    <header>
    </header>

    <!-- TODO:main -->

    <div class="container">
        <h1>注册</h1>
        <form onsubmit="register(event)">
            <label for="registerUsername">用户名</label>
            <input type="text" id="registerUsername">

            <label for="registerPassword">密码</label>
            <input type="password" id="registerPassword">

            <label for="registerConfirmPassword">确认密码</label>
            <input type="password" id="registerConfirmPassword">

            <button type="submit">注册</button>
        </form>
        <p>已有账号？<a href="login.html">点击登录</a></p>
    </div>


    <!-- 页脚 -->
    <footer>
        <span>Copyright ? 2024 ChaoXing</span>
        <a href="https://z.chaoxing.com/yanshi/first" target="_blank">
            <img src="./imgs/logo.png"/>
        </a>
    </footer>

    <script>
        async function register(event) {
            event.preventDefault();

            const username = document.getElementById('registerUsername').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            if (!username || !password || !confirmPassword) {
                alert('请输入所有必填字段');
                return;
            }

            if (password !== confirmPassword) {
                alert('密码和确认密码不一致');
                return;
            }

            const response = await fetch('/web/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ username, password})
            });

            const result = await response.json();

            // Handle the result as needed
            if (response.ok) {
                // Successful login
                alert("注册成功！");
                console.log(result.success);
            } else {
                // Display error message to the user
                alert(result.error);
            }
        }
    </script>

    <!--&lt;!&ndash; 脚本：JS中引用了DOM元素，需添加在DOM元素末尾 &ndash;&gt;-->
    <!--<script src="./js/login.js"></script>-->
</body>

</html>